1.限定機器範圍
限定PC or Mobile
http的user agent可判斷用甚麼瀏覽器 ex: Line、Chrome

2.google recaptcha 機器人
註冊/登入時可使用，而情境為其他狀況，導致一分鐘內頻繁使用(觸發三次上下)的話將自動判定成機器人

3.使用JWT
LINE JWT -> liff.getIDToken

4.使用session

5.黑名單
-標準
1. 檔國外的IP
2. IP突然切換
3. rate limit->N分鐘內只能被call幾次
4. 嘗試次數
5. 打api跳出throw錯誤次數

6.白名單 
- 特例 ex:自己的IP








1. IP 驗證與嘗試次數
黑客用的多半是跳板 IP。所以 IP 要不是從奇怪的小國過來，就是會與用戶平常慣用的 IP 非常不同。
作為系統防御者，你可以設置不同 IP 嘗試錯誤次數超過3-5次，就自動發短信警告用戶。黑客就算嘗試登入成功，因為來源 IP 網段不同，還是要通知用戶有不同 IP 燈入。
再來，你還可以加入一道降速手段。密碼正確之後，還要加入一道圖形驗證碼，防止用戶被程序自動攻破。
而如果用戶真的被成功登入，進行關鍵敏感操作（如提現或提幣），必須在系統設計上間隔 2-5 分鐘以上才能操作。
並且提幣這個動作要有第三道確認（如郵件確認）。
這是為了爭取讓有些用戶，有時間差可以反應阻擋攻擊。


3. IP 切換，cookie 立即作廢，自動強制登出使用者
除了盜取用戶的密碼外，有的服務，是用來釣魚使用者的 cookie 的。
這有一些手段你可以主動用來防禦：
一個帳號只能同時有一個 IP 登入
當 IP 切換立刻會被強制登出
cookie 在登入後幾小時候，沒有動作，也會自動被登出
確保這些 cookie 即使被偷了，也不一定有用。


API 風控
API 端點也是容易被 DDoS 與身份盜竊的重災區。
所以 API 在設計上應該要設計 rate limit，與請用戶設計 IP 白名單。而不是任意的 IP 就能存取。這樣才能保證是用戶授權的客戶端操作。



